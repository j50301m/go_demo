-- Create "auth_clients" table
CREATE TABLE "auth_clients" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "created_at" timestamptz NOT NULL, "updated_at" timestamptz NOT NULL, "client_type" bigint NOT NULL, "merchant_id" bigint NOT NULL, "secret" character varying NOT NULL, "active" boolean NOT NULL, "token_expire_secs" bigint NOT NULL, "login_failed_times" bigint NOT NULL, PRIMARY KEY ("id"));
-- Create "roles" table
CREATE TABLE "roles" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "created_at" timestamptz NOT NULL, "updated_at" timestamptz NOT NULL, "name" character varying NOT NULL, "permissions" jsonb NOT NULL, "is_system" boolean NOT NULL DEFAULT false, "client_type" bigint NOT NULL, PRIMARY KEY ("id"));
-- Create "auth_client_roles" table
CREATE TABLE "auth_client_roles" ("auth_client_id" bigint NOT NULL, "role_id" bigint NOT NULL, PRIMARY KEY ("auth_client_id", "role_id"), CONSTRAINT "auth_client_roles_auth_client_id" FOREIGN KEY ("auth_client_id") REFERENCES "auth_clients" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, CONSTRAINT "auth_client_roles_role_id" FOREIGN KEY ("role_id") REFERENCES "roles" ("id") ON UPDATE NO ACTION ON DELETE CASCADE);
-- Create "users" table
CREATE TABLE "users" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "created_at" timestamptz NOT NULL, "updated_at" timestamptz NOT NULL, "account" character varying NOT NULL, "password" character varying NOT NULL, "password_fail_times" bigint NOT NULL, "status" bigint NOT NULL, "auth_client_users" bigint NULL, "user_roles" bigint NULL, PRIMARY KEY ("id"), CONSTRAINT "users_auth_clients_users" FOREIGN KEY ("auth_client_users") REFERENCES "auth_clients" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, CONSTRAINT "users_roles_roles" FOREIGN KEY ("user_roles") REFERENCES "roles" ("id") ON UPDATE NO ACTION ON DELETE SET NULL);
-- Create index "users_account_key" to table: "users"
CREATE UNIQUE INDEX "users_account_key" ON "users" ("account");
-- Create "login_records" table
CREATE TABLE "login_records" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "created_at" timestamptz NOT NULL, "updated_at" timestamptz NOT NULL, "browser" character varying NOT NULL, "ip" character varying NOT NULL, "os" character varying NOT NULL, "country" character varying NOT NULL, "city" character varying NOT NULL, "is_success" boolean NOT NULL, "user_login_records" bigint NULL, PRIMARY KEY ("id"), CONSTRAINT "login_records_users_login_records" FOREIGN KEY ("user_login_records") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL);
